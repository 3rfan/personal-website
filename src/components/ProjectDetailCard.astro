---
import { TechBadge } from './TechBadge'
import { Button } from './ui/button'
import { Github, ExternalLink } from 'lucide-react'

interface Props {
  name: string
  description: string
  technologies: string[]
  githubUrl: string
  liveUrl?: string
  images: string[]
  startDate: string
  endDate: string
}

const { name, description, technologies, githubUrl, liveUrl, images, startDate, endDate } = Astro.props
---

<div class="rounded-lg border bg-card p-6 shadow-sm transition-shadow hover:shadow-md">
  <div class="flex flex-col gap-6">
    <!-- Header -->
    <div class="flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between">
      <h3 class="text-2xl font-semibold">{name}</h3>
      <span class="text-sm text-muted-foreground whitespace-nowrap">
        {startDate} - {endDate}
      </span>
    </div>

    <!-- Description -->
    <p class="text-sm leading-relaxed text-muted-foreground">
      {description}
    </p>

    <!-- Technologies -->
    <div>
      <h4 class="mb-3 text-sm font-semibold uppercase tracking-wide text-muted-foreground">
        Technologies Used
      </h4>
      <div class="flex flex-wrap gap-2">
        {technologies.map((tech) => (
          <TechBadge name={tech} client:load />
        ))}
      </div>
    </div>

    <!-- Images -->
    {images && images.length > 0 && (
      <div>
        <h4 class="mb-3 text-sm font-semibold uppercase tracking-wide text-muted-foreground">
          Screenshots
        </h4>
        <div class="grid gap-4 sm:grid-cols-2">
          {images.map((img) => (
            <div class="overflow-hidden rounded-lg border bg-muted">
              <img
                src={img}
                alt={`${name} screenshot`}
                class="h-full w-full object-cover transition-transform duration-300 hover:scale-105"
                loading="lazy"
              />
            </div>
          ))}
        </div>
      </div>
    )}

    <!-- Links -->
    <div class="flex flex-wrap gap-3">
      {githubUrl && (
        <a href={githubUrl} target="_blank" rel="noopener noreferrer">
          <Button variant="default" size="sm">
            <Github className="mr-2 h-4 w-4" />
            GitHub
          </Button>
        </a>
      )}
      {liveUrl && (
        <a href={liveUrl} target="_blank" rel="noopener noreferrer">
          <Button variant="outline" size="sm">
            <ExternalLink className="mr-2 h-4 w-4" />
            Live Demo
          </Button>
        </a>
      )}
    </div>
  </div>
</div>
